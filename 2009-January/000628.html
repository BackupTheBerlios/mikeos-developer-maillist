<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] On the the use of int xx
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20On%20the%20the%20use%20of%20int%20xx&In-Reply-To=%3C19d8b3b00901130207q526b0246g1bfd1ac54d74b17a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000624.html">
   <LINK REL="Next"  HREF="000631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] On the the use of int xx</H1>
    <B>M Saunders</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20On%20the%20the%20use%20of%20int%20xx&In-Reply-To=%3C19d8b3b00901130207q526b0246g1bfd1ac54d74b17a%40mail.gmail.com%3E"
       TITLE="[mikeos-developer] On the the use of int xx">okachi at gmail.com
       </A><BR>
    <I>Tue Jan 13 11:07:07 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000624.html">[mikeos-developer] On the the use of int xx
</A></li>
        <LI>Next message: <A HREF="000631.html">[mikeos-developer] On the the use of int xx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#628">[ date ]</a>
              <a href="thread.html#628">[ thread ]</a>
              <a href="subject.html#628">[ subject ]</a>
              <a href="author.html#628">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tslil,

What you've described is exactly how MikeOS set up a DOS 21h interrupt
handler in releases before 3.0:

1. Call os_modify_int_handler with the interrupt to change and
location of code to jump to

2. When a program executes int 21h, execution jumps to the previously
specified location

3. At that location, we check for the value in AX and then jmp to the
relevant bit of code

4. Once the bit of code has finished, we return back to the program with iret.

I still have a copy of MikeOS 1.4.2 around which demonstrates how to
do this -- let me know if you want it and I'll email it over.

As for a bootloader, they're largely the same if you're sticking with
real mode. Find file on floppy, load sectors to a place in RAM, and
jump to that place. I wouldn't spend ages with FAT12 at this point;
it's not very exciting and takes a fair bit of spec reading to
understand fully. I'd take the MikeOS bootloader, make it load your
own kernel, and put together the interrupt handler that you described!

M

-- 
Mike Saunders
<A HREF="http://okachi.googlepages.com">http://okachi.googlepages.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000624.html">[mikeos-developer] On the the use of int xx
</A></li>
	<LI>Next message: <A HREF="000631.html">[mikeos-developer] On the the use of int xx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#628">[ date ]</a>
              <a href="thread.html#628">[ thread ]</a>
              <a href="subject.html#628">[ subject ]</a>
              <a href="author.html#628">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
