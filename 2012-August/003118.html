<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] A memory allocator for MikeOS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2012-August/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20A%20memory%20allocator%20for%20MikeOS&In-Reply-To=%3C1345372378.38803.YahooMailClassic%40web65901.mail.ac4.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003117.html">
   <LINK REL="Next"  HREF="003121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] A memory allocator for MikeOS</H1>
    <B>Matej Horvat</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20A%20memory%20allocator%20for%20MikeOS&In-Reply-To=%3C1345372378.38803.YahooMailClassic%40web65901.mail.ac4.yahoo.com%3E"
       TITLE="[mikeos-developer] A memory allocator for MikeOS">redjazz_slo at yahoo.com
       </A><BR>
    <I>Sun Aug 19 12:32:58 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003117.html">[mikeos-developer] A memory allocator for MikeOS
</A></li>
        <LI>Next message: <A HREF="003121.html">[mikeos-developer] A memory allocator for MikeOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3118">[ date ]</a>
              <a href="thread.html#3118">[ thread ]</a>
              <a href="subject.html#3118">[ subject ]</a>
              <a href="author.html#3118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> How so?
</I>
Oh, you were talking about BASIC programs. I thought you meant machine code too.

&gt;<i> How doable would be a two-segment model, do you think? One
</I>&gt;<i> segment for
</I>&gt;<i> the kernel, and one for user programs?
</I>
Again, it would break compatibility, unless the kernel was split into multiple segments and the program segment only contained the most important kernel routines, so the jump table could still be used. This would still only give programs 32K though.

While we're on the topic of segments, why did you choose to use segment 2000h? I think it would make more sense if the kernel and program code used the lowest segment possible, so that programs could use all remaining conventional memory as they please. Of course, then we'd need a multi-segment memory manager, like the one in DOS. And we could have task switching!

&gt;<i> How could the &quot;user&quot;
</I>&gt;<i> segment
</I>&gt;<i> call routines in the kernel -- via interrupts?
</I>
Doesn't this pretty much give you a DOS clone? Unless you deliberately decide to create the interrupt API from scratch. In that case, you get the mess that is interrupt routine numbers. You'd have to memorize a bunch of them or keep a list of constants (like now). IMO the correct way would be to use strings to identify routines, though this of course slows things down a bit.

&gt;<i> I've always
</I>&gt;<i> wanted to
</I>&gt;<i> avoid the segmentation mess, but if there's a way to
</I>&gt;<i> implement this
</I>&gt;<i> fairly cleanly and simply, it'd be tempting. Sure, it'd
</I>&gt;<i> break
</I>&gt;<i> compatibility, but it'd give us so much more free room for
</I>&gt;<i> new
</I>&gt;<i> features in future.
</I>
It wouldn't necessarily break compatibility; you'd just load the old kernel (or a slightly modified version of it) into a user segment and old code would run normally.

Matej Horvat
<A HREF="http://matejhorvat.si/">http://matejhorvat.si/</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003117.html">[mikeos-developer] A memory allocator for MikeOS
</A></li>
	<LI>Next message: <A HREF="003121.html">[mikeos-developer] A memory allocator for MikeOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3118">[ date ]</a>
              <a href="thread.html#3118">[ thread ]</a>
              <a href="subject.html#3118">[ subject ]</a>
              <a href="author.html#3118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
