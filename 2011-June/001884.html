<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] Running MikeOS on an 8086 emulator
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20Running%20MikeOS%20on%20an%208086%20emulator&In-Reply-To=%3C20110617160600.13THD.624646.root%40web11-winn.ispmail.private.ntl.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001894.html">
   <LINK REL="Next"  HREF="001887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] Running MikeOS on an 8086 emulator</H1>
    <B>wisecracker at tesco.net</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20Running%20MikeOS%20on%20an%208086%20emulator&In-Reply-To=%3C20110617160600.13THD.624646.root%40web11-winn.ispmail.private.ntl.com%3E"
       TITLE="[mikeos-developer] Running MikeOS on an 8086 emulator">wisecracker at tesco.net
       </A><BR>
    <I>Fri Jun 17 17:06:00 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001894.html">[mikeos-developer] Running MikeOS on an 8086 emulator
</A></li>
        <LI>Next message: <A HREF="001887.html">[mikeos-developer] Running MikeOS on an 8086 emulator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1884">[ date ]</a>
              <a href="thread.html#1884">[ thread ]</a>
              <a href="subject.html#1884">[ subject ]</a>
              <a href="author.html#1884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Mike...

I'm at work ATM, quick nresponse will be more thorough later tonight...

&gt;<i> Bazza in particular might be able to answer this! I've tried to get
</I>&gt;<i> MikeOS running on this 8086 PC emulator I saw on OSDev:
</I>
&gt;<i> <A HREF="http://fake86.rubbermallet.org">http://fake86.rubbermallet.org</A>
</I>
Not familiar with this emulator but it is not following Intel 8086 HW exactly.

&gt;<i> It kind-of works, but goes straight to the command line and takes no
</I>&gt;<i> input. Running with the -verbose flag it reports:
</I>
&gt;<i> Illegal opcode: 66 @ 0000:7C54
</I>&gt;<i> Illegal opcode: 0F @ 2000:34BA
</I>&gt;<i> Illegal opcode: 0F @ 2000:0139
</I>
AFAIK there is no such thing as an illegal opcode in Intel architecture, (dunno about AMD).
These opcodes on real 16 bit HW respond the same as NOPs and are ignored by
the CPU just moving the IP one more place and adding 2 clock pulses.

&gt;<i> The first is due to the use of eax in the bootloader; the second and
</I>&gt;<i> third are to do with &quot;jnz&quot; instructions:
</I>
&gt;<i> 000034BA  0F8572FF          jnz word 0x3430
</I>&gt;<i> 00000139  0F859400          jnz word 0x1d1
</I>
(0x)0F is a ltttle more difficult to explain but will get back to you later.
It is a prefix like (0x)66 is...

&gt;<i> I'm puzzled by this -- &quot;jnz&quot; seems a valid instruction for the 8086.
</I>&gt;<i> But could the 8086 version only use single byte displacement or
</I>&gt;<i> something?
</I>
This should be at least a starter...



--
73...

Bazza, G0LCU...

Team AMIGA...

<A HREF="http://homepages.tesco.net/wisecracker/">http://homepages.tesco.net/wisecracker/</A>

<A HREF="http://main.aminet.net/search?readme=wisecracker">http://main.aminet.net/search?readme=wisecracker</A>

<A HREF="http://mikeos.berlios.de/">http://mikeos.berlios.de/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001894.html">[mikeos-developer] Running MikeOS on an 8086 emulator
</A></li>
	<LI>Next message: <A HREF="001887.html">[mikeos-developer] Running MikeOS on an 8086 emulator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1884">[ date ]</a>
              <a href="thread.html#1884">[ thread ]</a>
              <a href="subject.html#1884">[ subject ]</a>
              <a href="author.html#1884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
