<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] Wellcome into the unreal mode.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20%3D%3Futf-8%3Fq%3FWellcome_into_the_unreal_mode%3D2E%3F%3D&In-Reply-To=%3C618496c.307bcba6.4906fa38.59dfe%40o2.pl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000429.html">
   <LINK REL="Next"  HREF="000419.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] Wellcome into the unreal mode.</H1>
    <B>gavian</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20%3D%3Futf-8%3Fq%3FWellcome_into_the_unreal_mode%3D2E%3F%3D&In-Reply-To=%3C618496c.307bcba6.4906fa38.59dfe%40o2.pl%3E"
       TITLE="[mikeos-developer] Wellcome into the unreal mode.">gavian at tlen.pl
       </A><BR>
    <I>Tue Oct 28 12:40:40 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000429.html">[mikeos-developer] Wellcome into the unreal mode.
</A></li>
        <LI>Next message: <A HREF="000419.html">[mikeos-developer] Wellcome into the unreal mode.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#418">[ date ]</a>
              <a href="thread.html#418">[ thread ]</a>
              <a href="subject.html#418">[ subject ]</a>
              <a href="author.html#418">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Works on both of my laptops! Great job Tomasz -- thanks. I'll now move
</I>&gt;<i> that code into a standalone routine, then start implementing the new
</I>&gt;<i> memory map and int 47h-based system call mechanism,
</I>
I think we should add a code to check if it is possible to switch to the Protected Mode.

The code I have sent switch only FS segment register. 
If we want to be able to use all segment registers (execpt CS of course) you have to change the code a little bit.

I  have read about the unreal mode and there is no difference between real mode execpt in real mode limit in GDT for each register is 64KB.

We are switching to Protected mode, changiing GDT (set limit to 0xFFFFFFFF), load each segment register with a new value to make the processor fill his cache for each segment register and then switch back to real mode.

Then in the real mode when we change segment register value processor doesn't update it according his GDT. He uses values from the cache :)

I think it works like that.

I am working on the debuger and it goes fine. I have written a simple GUI.

Supports so far MAIN_WINDOW, LABEL, EDIT_BOX. Should be enough for the debuger.
Idea is simple. You create main widnow with certain parameters (x, y, , hieght, width, caption),
then you can create children windows and add it to the main window (coordinates of children windows are set in left top corner of the parent window). It is alfa stage but it works fine. I have only 8KB so I try to make it small as possible. Structure which describes each window eats abot 64B.

I have to tune it a little bit, change colors and the I will sent a patch to check it out.

Cheers

Tomasz Gorol



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000429.html">[mikeos-developer] Wellcome into the unreal mode.
</A></li>
	<LI>Next message: <A HREF="000419.html">[mikeos-developer] Wellcome into the unreal mode.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#418">[ date ]</a>
              <a href="thread.html#418">[ thread ]</a>
              <a href="subject.html#418">[ subject ]</a>
              <a href="author.html#418">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
