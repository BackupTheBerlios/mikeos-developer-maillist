<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] Windows build script updated
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20Windows%20build%20script%20updated&In-Reply-To=%3C19d8b3b01001251545w4ce1b903l73a306ddf3eda6bd%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000964.html">
   <LINK REL="Next"  HREF="000966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] Windows build script updated</H1>
    <B>M Saunders</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20Windows%20build%20script%20updated&In-Reply-To=%3C19d8b3b01001251545w4ce1b903l73a306ddf3eda6bd%40mail.gmail.com%3E"
       TITLE="[mikeos-developer] Windows build script updated">okachi at gmail.com
       </A><BR>
    <I>Tue Jan 26 00:45:20 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000964.html">[mikeos-developer] Windows build script updated
</A></li>
        <LI>Next message: <A HREF="000966.html">[mikeos-developer] Windows build script updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#965">[ date ]</a>
              <a href="thread.html#965">[ thread ]</a>
              <a href="subject.html#965">[ subject ]</a>
              <a href="author.html#965">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lo,

Alright, I think I've found the problem. In XP, this will not set
ERRORLEVEL to 9009 if NASM can't be found (although it sets it in
Windows 7):

  nasm 2&gt; nul
  if ERRORLEVEL 9009 set MIKEOS_NONASM=1

Without any redirection, however, it does work in XP:

  nasm
  if ERRORLEVEL 9009 set MIKEOS_NONASM=1

So the script will work with all references to 2&gt;nul removed, but then
there's no redirection taking place and loads of rubbish gets spewed
onto the screen, whether you have the tools or not. It's either
Windows moaning that it can't find the executable or the default blurb
from the programs.

As Paulo says, BAT files are a royal pain to deal with (although in
fairness, Microsoft does seem to have a much better, and more
Unix-like, shell in Windows 7) so I don't know how fixable this is.
Any ideas welcome!

M

-- 
Mike Saunders
<A HREF="http://okachi.googlepages.com">http://okachi.googlepages.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000964.html">[mikeos-developer] Windows build script updated
</A></li>
	<LI>Next message: <A HREF="000966.html">[mikeos-developer] Windows build script updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#965">[ date ]</a>
              <a href="thread.html#965">[ thread ]</a>
              <a href="subject.html#965">[ subject ]</a>
              <a href="author.html#965">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
