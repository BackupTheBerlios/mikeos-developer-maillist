<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] Single byte KB I/O code...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20Single%20byte%20KB%20I/O%20code...&In-Reply-To=%3C419622.74808.qm%40web113106.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001014.html">
   <LINK REL="Next"  HREF="001017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] Single byte KB I/O code...</H1>
    <B>Paulo Valongo</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20Single%20byte%20KB%20I/O%20code...&In-Reply-To=%3C419622.74808.qm%40web113106.mail.gq1.yahoo.com%3E"
       TITLE="[mikeos-developer] Single byte KB I/O code...">paulovalongo at rocketmail.com
       </A><BR>
    <I>Sat Jan 30 16:04:47 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001014.html">[mikeos-developer] Single byte KB I/O code...
</A></li>
        <LI>Next message: <A HREF="001017.html">[mikeos-developer] Single byte KB I/O code...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1016">[ date ]</a>
              <a href="thread.html#1016">[ thread ]</a>
              <a href="subject.html#1016">[ subject ]</a>
              <a href="author.html#1016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Bazza,

&gt;<i> This is where my interest lies, the BASIC interpreter...  
</I>&gt;<i> The assembler side doesn't interest me....
</I>
I like coffee, you like tea, 
I like assembler, you say it ain't for me....

Seriously though, you should disable and the re-enable interrupts before communicating
with the keyboard controller.
As you say, you prefer BASIC, then why not as Mike nicely if he will include two new BASIC commands
int_on  and int_off which will then simply execute sti and cli respectively.
In this way you could code the whole thing in BASIC and by enabling and disabling the int's you would make it more universal.

Paulo.



----- Original Message ----
From: &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/mikeos-developer">wisecracker at tesco.net</A>&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mikeos-developer">wisecracker at tesco.net</A>&gt;
To: MikeOS (and similar OS) developers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mikeos-developer">mikeos-developer at lists.berlios.de</A>&gt;
Sent: Sat, January 30, 2010 4:30:26 PM
Subject: [mikeos-developer] Single byte KB I/O code...

Finally realised my error...

My original code was written for MS-DOS duh!

Remember my phrase:-

Enjoy finding simple simple solutions to often difficult problems...

Here is the MikeOS code for single byte I/O just setting the capslock LED
in ths example but simultaneous numlock and scrol lock are easy. This is 24
bytes in size and can NOW be ENTIRELY entered from MikeBASIC...

This is where my interest lies, the BASIC interpreter...  COOL MIKE...
The assembler side doesn`t interest me, and SASANO many thanks for that
one piece of info you gave...

Tested with a USB to PS2 adaptor and a genuine PS2 KB, and MikeOS on the
Quad core tool and this notebook...

the rest as they say is EASY...

    pushf
    push    ax
    push    dx
    push    ds
    mov     dx,0040h
    mov     ds,dx
    mov     al,[0017h]
    or      al,040h
    mov     [0017h],al
    int     9
    pop     ds
    pop     dx
    pop     ax
    popf
    ret


Enjoy...
_______________________________________________
mikeos-developer mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/mikeos-developer">mikeos-developer at lists.berlios.de</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/mikeos-developer">https://lists.berlios.de/mailman/listinfo/mikeos-developer</A>



      


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001014.html">[mikeos-developer] Single byte KB I/O code...
</A></li>
	<LI>Next message: <A HREF="001017.html">[mikeos-developer] Single byte KB I/O code...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1016">[ date ]</a>
              <a href="thread.html#1016">[ thread ]</a>
              <a href="subject.html#1016">[ subject ]</a>
              <a href="author.html#1016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
