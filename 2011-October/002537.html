<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mikeos-developer] FAT16 bootloader
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mikeos-developer/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20FAT16%20bootloader&In-Reply-To=%3CCAPRjAGg3Z__gscoLS6dLDedcSfRGEV1G91U_1L7gro_CzQWOcA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002514.html">
   <LINK REL="Next"  HREF="002539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mikeos-developer] FAT16 bootloader</H1>
    <B>Paulo V</B> 
    <A HREF="mailto:mikeos-developer%40lists.berlios.de?Subject=Re%3A%20%5Bmikeos-developer%5D%20FAT16%20bootloader&In-Reply-To=%3CCAPRjAGg3Z__gscoLS6dLDedcSfRGEV1G91U_1L7gro_CzQWOcA%40mail.gmail.com%3E"
       TITLE="[mikeos-developer] FAT16 bootloader">paulomobilemail at gmail.com
       </A><BR>
    <I>Tue Oct  4 09:42:30 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002514.html">[mikeos-developer] FAT16 bootloader
</A></li>
        <LI>Next message: <A HREF="002539.html">[mikeos-developer] FAT16 bootloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2537">[ date ]</a>
              <a href="thread.html#2537">[ thread ]</a>
              <a href="subject.html#2537">[ subject ]</a>
              <a href="author.html#2537">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mike,

Status update:

Just got myself a brand new 4GB USB key
and I booted MikeOS from it perfectly.

I can format just about any USB drive to FAT16
and boot MikeOS from it but can't say the same
when using an image.

What I do is format the drive to FAT16 and this gives
me the correct BPB and table entries for that drive.
Then all I do is modify byte offsets 3Eh to 1FFh (inc.)
with the slightly modified FreeDOS bootloader bin

The mods as follows:

1) Make sure bytes 00 - 02 are EBh,3Ch,90h

2) Change the kernel name from KERNEL  .SYS
   to KERNEL  .BIN (offsets 1F1h - 1FBh).

3) I then check that the Drive ID is set to 80h
   which tells the BIOS it's a HDD.

4) I set the partition as type 04 (FAT16 less then 32MB)
   and make it bootable.

This works perfectly with real hardware but not with
an image.

Would a 32MB image be OK versus a 16MB one?
The reason I ask is that I have just found an old
32MB CF card, so I will format and fdisk it, then
copy the whole drive as an image and use that
as a starting/reference point.

I will investigate further and let you know.

Paulo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mikeos-developer/attachments/20111004/16b7fc1e/attachment.html">https://lists.berlios.de/pipermail/mikeos-developer/attachments/20111004/16b7fc1e/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002514.html">[mikeos-developer] FAT16 bootloader
</A></li>
	<LI>Next message: <A HREF="002539.html">[mikeos-developer] FAT16 bootloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2537">[ date ]</a>
              <a href="thread.html#2537">[ thread ]</a>
              <a href="subject.html#2537">[ subject ]</a>
              <a href="author.html#2537">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mikeos-developer">More information about the mikeos-developer
mailing list</a><br>
</body></html>
